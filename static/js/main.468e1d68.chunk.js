(this["webpackJsonpvacuum-world"]=this["webpackJsonpvacuum-world"]||[]).push([[0],{13:function(t,e,n){},15:function(t,e,n){},16:function(t,e,n){"use strict";n.r(e);var o=n(3),r=n.n(o),i=n(8),s=n.n(i),a=(n(13),n(1)),u=n(2),l=n(4),c=n(6),h=n(5);function d(t){return Math.floor(Math.random()*t)}function m(t,e,n){return e*n+t}var b=function t(e,n,o,r){Object(a.a)(this,t),this.position={x:e,y:n},this.vacuumPresent=o,this.dirtPresent=r};function v(t,e){var n=new f(t,e,function(t,e){for(var n=[],o=0;o<t;++o)for(var r=0;r<e;++r)n[m(r,o,e)]=new b(r,o,!1,!1);return n}(t,e),{x:d(e),y:d(t)});return n.grid[n.robotIdx()].vacuumPresent=!0,n.markRandomSpotsWithDirt(),n}function y(t,e){var n=t.grid,o=t.robotPosition,r=t.robotIdx(),i=t.numRows,s=t.numCols;return"CLEAN"===e?n[r].dirtPresent=!1:(n[r].vacuumPresent=!1,"LEFT"===e&&o.x>0?o.x--:"RIGHT"===e&&o.x<s-1?o.x++:"UP"===e&&o.y>0?o.y--:"DOWN"===e&&o.y<i-1&&o.y++,n[m(o.x,o.y,s)].vacuumPresent=!0),new f(i,s,n,o)}var f=function(){function t(e,n,o,r){Object(a.a)(this,t),this.numRows=e,this.numCols=n,this.grid=o,this.robotPosition=r}return Object(u.a)(t,[{key:"markRandomSpotsWithDirt",value:function(){for(var t=Math.floor(this.size()/2),e=0;e<t;++e)this.grid[this.randomIdx()].dirtPresent=!0}},{key:"robotIdx",value:function(){return m(this.robotPosition.x,this.robotPosition.y,this.numCols)}},{key:"size",value:function(){return this.numRows*this.numCols}},{key:"randomIdx",value:function(){return d(this.size())}},{key:"robotCell",value:function(){return this.grid[this.robotIdx()]}}]),t}(),p=["CLEAN","LEFT","RIGHT","DOWN","UP"];Object.freeze(p);var j=function(){function t(){Object(a.a)(this,t),this.uniqueKey=0}return Object(u.a)(t,[{key:"key",value:function(){return++this.uniqueKey}}]),t}(),k=n(0),C=function(t){Object(c.a)(n,t);var e=Object(h.a)(n);function n(t){var o;return Object(a.a)(this,n),(o=e.call(this,t)).state={world:t.world,robot:t.robot,robotActionStr:"",keyGen:new j},o}return Object(u.a)(n,[{key:"stepSimulation",value:function(){var t=this.state.robot.nextAction(this.state.world);-1===p.indexOf(t)&&console.log("".concat(t," is not a valid action.")),this.setState({world:y(this.state.world,t),robotActionStr:t})}},{key:"timer",value:function(){var t=this;return setInterval((function(){return t.stepSimulation()}),1e3)}},{key:"startTimer",value:function(){this.timerId=this.timer()}},{key:"stopTimer",value:function(){clearInterval(this.timerId)}},{key:"componentDidMount",value:function(){this.startTimer()}},{key:"componentDidUpdate",value:function(t){var e=!1;this.props.world!==t.world&&(this.setState({world:this.props.world}),e=!0),this.props.robot!==t.robot&&(this.setState({robot:this.props.robot}),e=!0),e&&this.props.runningSim&&(this.stopTimer(),this.startTimer()),this.props.runningSim!==t.runningSim&&(this.props.runningSim?this.startTimer():this.stopTimer())}},{key:"componentWillUnmount",value:function(){this.stopTimer()}},{key:"renderVacuum",value:function(t){if(t.vacuumPresent)return Object(k.jsx)("div",{className:"vacuum",children:Object(k.jsx)("p",{className:"action",children:this.state.robotActionStr})})}},{key:"renderCell",value:function(t){return t.dirtPresent?Object(k.jsx)("div",{className:"sim-cell",style:{backgroundColor:"SaddleBrown"},children:this.renderVacuum(t)},this.state.keyGen.key()):Object(k.jsx)("div",{className:"sim-cell",style:{backgroundColor:"Cornsilk"},children:this.renderVacuum(t)},this.state.keyGen.key())}},{key:"renderCells",value:function(){var t=this;return this.state.world.grid.map((function(e){return t.renderCell(e)}))}},{key:"render",value:function(){return Object(k.jsx)("div",{className:"div-sim",children:this.renderCells()})}}]),n}(r.a.Component),g=function(){function t(){Object(a.a)(this,t)}return Object(u.a)(t,[{key:"nextAction",value:function(t){var e="";return e=t.robotCell().dirtPresent?"CLEAN":this.randomMovement(),e}},{key:"randomMovement",value:function(){return p[Math.floor(Math.random()*Math.floor(p.length-1)+1)]}}]),t}(),w=function(){function t(){Object(a.a)(this,t),this.memory=[]}return Object(u.a)(t,[{key:"nextAction",value:function(t){var e="";return e=t.robotCell().dirtPresent?"CLEAN":"LEFT"===this.lastAction()?t.robotPosition.x>0?"LEFT":"RIGHT":t.robotPosition.x<t.numCols-1?"RIGHT":"LEFT",this.memory.push(e),e}},{key:"lastAction",value:function(){return this.memory[this.memory.length-1]}}]),t}(),O=["DumbBot","RandomBot"],S=function(t){return"DumbBot"===t?new w:"RandomBot"===t?new g:void console.log("Bad Robot Type.")},x=function(t){Object(c.a)(n,t);var e=Object(h.a)(n);function n(t){var o;return Object(a.a)(this,n),(o=e.call(this,t)).state={world:v(t.numRows,t.numCols),robotType:O[0],robot:S(O[0]),numRows:t.numRows,numCols:t.numCols,runningSim:!0,keyGen:new j},o.updateProperties(t.numRows,t.numCols),o.resetWorld=o.resetWorld.bind(Object(l.a)(o)),o.handleRobotChange=o.handleRobotChange.bind(Object(l.a)(o)),o.handleRowChange=o.handleRowChange.bind(Object(l.a)(o)),o.handleColChange=o.handleColChange.bind(Object(l.a)(o)),o.stopWorld=o.stopWorld.bind(Object(l.a)(o)),o.startWorld=o.startWorld.bind(Object(l.a)(o)),o}return Object(u.a)(n,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"updateProperties",value:function(t,e){document.documentElement.style.setProperty("--numRows",t),document.documentElement.style.setProperty("--numCols",e),document.documentElement.style.setProperty("--colWidth",100/e+"%")}},{key:"componentDidUpdate",value:function(t,e){this.state.numRows===e.numRows&&this.state.numCols===e.numCols||(this.updateProperties(this.state.numRows,this.state.numCols),this.resetWorld())}},{key:"resetWorld",value:function(){this.setState({world:v(this.state.numRows,this.state.numCols)})}},{key:"handleRobotChange",value:function(t){this.setState({robotType:t.target.value,robot:S(t.target.value)})}},{key:"handleRowChange",value:function(t){this.setState({numRows:t.target.value})}},{key:"handleColChange",value:function(t){this.setState({numCols:t.target.value})}},{key:"renderRobotTypeOption",value:function(t){return Object(k.jsx)("option",{value:t,children:t},this.state.keyGen.key())}},{key:"renderRobotSelection",value:function(){var t=this;return Object(k.jsx)("select",{className:"manager-button",value:this.state.robotType,onChange:this.handleRobotChange,children:O.map((function(e){return t.renderRobotTypeOption(e)}))})}},{key:"renderNumberSelection",value:function(t){return Object(k.jsx)("option",{value:t,children:t},this.state.keyGen.key())}},{key:"renderRowSelection",value:function(){var t=this;return Object(k.jsx)("select",{className:"manager-button",value:this.state.numRows,onChange:this.handleRowChange,children:[1,2,3,4,5,6].map((function(e){return t.renderNumberSelection(e)}))})}},{key:"renderColSelection",value:function(){var t=this;return Object(k.jsx)("select",{className:"manager-button",value:this.state.numCols,onChange:this.handleColChange,children:[1,2,3,4,5,6].map((function(e){return t.renderNumberSelection(e)}))})}},{key:"stopWorld",value:function(){this.setState({runningSim:!1})}},{key:"startWorld",value:function(){this.setState({runningSim:!0})}},{key:"renderStartStopButton",value:function(){return this.state.runningSim?Object(k.jsx)("button",{onClick:this.stopWorld,className:"manager-button",children:"Stop"}):Object(k.jsx)("button",{onClick:this.startWorld,className:"manager-button",children:"Start"})}},{key:"renderManagerPane",value:function(){return Object(k.jsxs)("div",{className:"div-pane",children:[this.renderRobotSelection(),this.renderRowSelection(),this.renderColSelection(),this.renderStartStopButton(),Object(k.jsx)("button",{onClick:this.resetWorld,className:"manager-button",children:"RESET"})]})}},{key:"renderWorld",value:function(){return Object(k.jsx)(C,{robot:this.state.robot,world:this.state.world,runningSim:this.state.runningSim})}},{key:"render",value:function(){return Object(k.jsxs)("div",{className:"div-manager",children:[this.renderManagerPane(),this.renderWorld()]})}}]),n}(r.a.Component);n(15);var R=function(){return Object(k.jsx)("div",{className:"App",children:Object(k.jsxs)("div",{className:"App-header",children:[Object(k.jsx)("h1",{children:"Vacuum World"}),Object(k.jsx)(x,{numRows:3,numCols:3})]})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(Object(k.jsx)(r.a.StrictMode,{children:Object(k.jsx)(R,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[16,1,2]]]);
//# sourceMappingURL=main.468e1d68.chunk.js.map