(this["webpackJsonpvacuum-world"]=this["webpackJsonpvacuum-world"]||[]).push([[0],{14:function(t,e,n){},16:function(t,e,n){},17:function(t,e,n){"use strict";n.r(e);var r=n(3),o=n.n(r),i=n(7),s=n.n(i),a=(n(14),n(1)),u=n(2),c=n(5),l=n(4),h=n(9);function d(t){return Math.floor(Math.random()*t)}function m(t,e,n){return e*n+t}var b=function t(e,n,r,o){Object(a.a)(this,t),this.position={x:e,y:n},this.vacuumPresent=r,this.dirtPresent=o};function v(t,e){var n=new p(t,e,function(t,e){for(var n=[],r=0;r<t;++r)for(var o=0;o<e;++o)n[m(o,r,e)]=new b(o,r,!1,!1);return n}(t,e),{x:d(e),y:d(t)});return n.grid[n.robotIdx()].vacuumPresent=!0,n.markRandomSpotsWithDirt(),n}function f(t,e){var n=t.grid.map((function(t){return Object.assign({},t)})),r=Object(h.a)({},t.robotPosition),o=t.robotIdx(),i=t.numRows,s=t.numCols;return"CLEAN"===e?n[o].dirtPresent=!1:(n[o].vacuumPresent=!1,"LEFT"===e&&r.x>0?r.x=r.x-1:"RIGHT"===e&&r.x<s-1?r.x=r.x+1:"UP"===e&&r.y>0?r.y=r.y-1:"DOWN"===e&&r.y<i-1&&(r.y=r.y+1),n[m(r.x,r.y,s)].vacuumPresent=!0),new p(i,s,n,r)}var p=function(){function t(e,n,r,o){Object(a.a)(this,t),this.numRows=e,this.numCols=n,this.grid=r,this.robotPosition=o}return Object(u.a)(t,[{key:"markRandomSpotsWithDirt",value:function(){for(var t=Math.floor(this.size()/2),e=0;e<t;++e)this.grid[this.randomIdx()].dirtPresent=!0}},{key:"robotIdx",value:function(){return m(this.robotPosition.x,this.robotPosition.y,this.numCols)}},{key:"size",value:function(){return this.numRows*this.numCols}},{key:"randomIdx",value:function(){return d(this.size())}},{key:"robotCell",value:function(){return this.grid[this.robotIdx()]}},{key:"robotOnDirt",value:function(){return this.robotCell().dirtPresent}}]),t}(),y=["CLEAN","LEFT","RIGHT","DOWN","UP"];Object.freeze(y);var j=function(){function t(){Object(a.a)(this,t),this.uniqueKey=0}return Object(u.a)(t,[{key:"key",value:function(){return++this.uniqueKey}}]),t}(),k=n(0),g=function(t){Object(c.a)(n,t);var e=Object(l.a)(n);function n(t){var r;return Object(a.a)(this,n),(r=e.call(this,t)).state={world:t.world,robot:t.robot,robotActionStr:"",keyGen:new j},r}return Object(u.a)(n,[{key:"stepSimulation",value:function(){var t=this.state.robot.nextAction(this.state.world);-1===y.indexOf(t)&&console.log("".concat(t," is not a valid action.")),this.setState({world:f(this.state.world,t),robotActionStr:t})}},{key:"timer",value:function(){var t=this;return setInterval((function(){return t.stepSimulation()}),1e3)}},{key:"startTimer",value:function(){this.timerId=this.timer()}},{key:"stopTimer",value:function(){clearInterval(this.timerId)}},{key:"componentDidMount",value:function(){this.startTimer()}},{key:"componentDidUpdate",value:function(t){var e=!1;this.props.world!==t.world&&(this.setState({world:this.props.world}),e=!0),this.props.robot!==t.robot&&(this.setState({robot:this.props.robot}),e=!0),e&&this.props.runningSim&&(this.stopTimer(),this.startTimer()),this.props.runningSim!==t.runningSim&&(this.props.runningSim?this.startTimer():this.stopTimer())}},{key:"componentWillUnmount",value:function(){this.stopTimer()}},{key:"renderVacuum",value:function(t){if(t.vacuumPresent)return Object(k.jsx)("div",{className:"vacuum",children:Object(k.jsx)("p",{className:"action",children:this.state.robotActionStr})})}},{key:"renderCell",value:function(t){return t.dirtPresent?Object(k.jsx)("div",{className:"sim-cell",style:{backgroundColor:"SaddleBrown"},children:this.renderVacuum(t)},this.state.keyGen.key()):Object(k.jsx)("div",{className:"sim-cell",style:{backgroundColor:"Cornsilk"},children:this.renderVacuum(t)},this.state.keyGen.key())}},{key:"renderCells",value:function(){var t=this;return this.state.world.grid.map((function(e){return t.renderCell(e)}))}},{key:"render",value:function(){return Object(k.jsx)("div",{className:"div-sim",children:this.renderCells()})}}]),n}(o.a.Component),O=n(8),w=function(){function t(){Object(a.a)(this,t),this.remainingActions=[]}return Object(u.a)(t,[{key:"nextAction",value:function(t){if(0===this.remainingActions.length&&(this.remainingActions=this.breadthFirstSearch(t)),0===this.remainingActions.length)return"CLEAN";var e=this.remainingActions.pop();return e||"CLEAN"}},{key:"breadthFirstSearch",value:function(t){var e={state:t,parent:null,action:null};if(e.state.robotOnDirt())return[];for(var n=[e],r=[e.state.robotIdx()];0!==n.length;){e=n.shift();var o,i=this.expand(e.state,e),s=Object(O.a)(i);try{for(s.s();!(o=s.n()).done;){var a=o.value;if(a.state.robotOnDirt())return this.retrieveActionsToNode(a);r.includes(a.state.robotIdx())||(r.push(a.state.robotIdx()),n.push(a))}}catch(u){s.e(u)}finally{s.f()}}return[]}},{key:"expand",value:function(t,e){for(var n=[],r=0,o=["LEFT","RIGHT","UP","DOWN"];r<o.length;r++){var i=o[r],s=f(t,i);t.robotIdx()!==s.robotIdx()&&n.push({state:s,parent:e,action:i})}return n}},{key:"retrieveActionsToNode",value:function(t){for(var e=[t.action],n=t.parent;null!=n;)n.action&&e.push(n.action),n=n.parent;return e}}]),t}(),x=function(){function t(){Object(a.a)(this,t)}return Object(u.a)(t,[{key:"nextAction",value:function(t){var e="";return e=t.robotCell().dirtPresent?"CLEAN":this.randomMovement(),e}},{key:"randomMovement",value:function(){return y[Math.floor(Math.random()*Math.floor(y.length-1)+1)]}}]),t}(),C=function(){function t(){Object(a.a)(this,t),this.memory=[]}return Object(u.a)(t,[{key:"nextAction",value:function(t){var e="";return e=t.robotCell().dirtPresent?"CLEAN":"LEFT"===this.lastAction()?t.robotPosition.x>0?"LEFT":"RIGHT":t.robotPosition.x<t.numCols-1?"RIGHT":"LEFT",this.memory.push(e),e}},{key:"lastAction",value:function(){return this.memory[this.memory.length-1]}}]),t}(),S=["BreadthFirstSearchBot","DumbBot","RandomBot"],R=function(t){return"DumbBot"===t?new C:"RandomBot"===t?new x:"BreadthFirstSearchBot"===t?new w:void console.log("Bad Robot Type.")},N=function(t){Object(c.a)(n,t);var e=Object(l.a)(n);function n(t){var r;return Object(a.a)(this,n),(r=e.call(this,t)).resetWorld=function(){r.setState({world:v(r.state.numRows,r.state.numCols)})},r.handleRobotChange=function(t){r.setState({robotType:t.target.value,robot:R(t.target.value)})},r.handleRowChange=function(t){r.setState({numRows:t.target.value})},r.handleColChange=function(t){r.setState({numCols:t.target.value})},r.stopWorld=function(){r.setState({runningSim:!1})},r.startWorld=function(){r.setState({runningSim:!0})},r.state={world:v(t.numRows,t.numCols),robotType:S[0],robot:R(S[0]),numRows:t.numRows,numCols:t.numCols,runningSim:!0,keyGen:new j},r.updateProperties(t.numRows,t.numCols),r}return Object(u.a)(n,[{key:"updateProperties",value:function(t,e){document.documentElement.style.setProperty("--numRows",t),document.documentElement.style.setProperty("--numCols",e),document.documentElement.style.setProperty("--colWidth",100/e+"%")}},{key:"componentDidUpdate",value:function(t,e){this.state.numRows===e.numRows&&this.state.numCols===e.numCols||(this.updateProperties(this.state.numRows,this.state.numCols),this.resetWorld())}},{key:"renderRobotTypeOption",value:function(t){return Object(k.jsx)("option",{value:t,children:t},this.state.keyGen.key())}},{key:"renderRobotSelection",value:function(){var t=this;return Object(k.jsx)("select",{className:"manager-button",value:this.state.robotType,onChange:this.handleRobotChange,children:S.map((function(e){return t.renderRobotTypeOption(e)}))})}},{key:"renderNumberSelection",value:function(t){return Object(k.jsx)("option",{value:t,children:t},this.state.keyGen.key())}},{key:"renderRowSelection",value:function(){var t=this;return Object(k.jsx)("select",{className:"manager-button",value:this.state.numRows,onChange:this.handleRowChange,children:[1,2,3,4,5,6].map((function(e){return t.renderNumberSelection(e)}))})}},{key:"renderColSelection",value:function(){var t=this;return Object(k.jsx)("select",{className:"manager-button",value:this.state.numCols,onChange:this.handleColChange,children:[1,2,3,4,5,6].map((function(e){return t.renderNumberSelection(e)}))})}},{key:"renderStartStopButton",value:function(){return this.state.runningSim?Object(k.jsx)("button",{onClick:this.stopWorld,className:"manager-button",children:"Stop"}):Object(k.jsx)("button",{onClick:this.startWorld,className:"manager-button",children:"Start"})}},{key:"renderManagerPane",value:function(){return Object(k.jsxs)("div",{className:"div-pane",children:[this.renderRobotSelection(),this.renderRowSelection(),this.renderColSelection(),this.renderStartStopButton(),Object(k.jsx)("button",{onClick:this.resetWorld,className:"manager-button",children:"RESET"})]})}},{key:"renderWorld",value:function(){return Object(k.jsx)(g,{robot:this.state.robot,world:this.state.world,runningSim:this.state.runningSim})}},{key:"render",value:function(){return Object(k.jsxs)("div",{className:"div-manager",children:[this.renderManagerPane(),this.renderWorld()]})}}]),n}(o.a.Component);n(16);var P=function(){return Object(k.jsx)("div",{className:"App",children:Object(k.jsxs)("div",{className:"App-header",children:[Object(k.jsx)("h1",{children:"Vacuum World"}),Object(k.jsx)(N,{numRows:3,numCols:3})]})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(Object(k.jsx)(o.a.StrictMode,{children:Object(k.jsx)(P,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[17,1,2]]]);
//# sourceMappingURL=main.28be5e6c.chunk.js.map